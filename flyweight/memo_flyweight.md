# FlyWeight

FlyWeightパターンは、同一のインスタンスはできるだけ使いまわして、無駄にnewしないためのパターン。
内容が完全に同じインスタンスであれば、複数のインスタンスを作成するメリットはない。
しかし、もし今後の修正で、同じ内容だったインスタンスが使う場所によって内容を変える必要が出そうなら、あまり使えない。

Javaのガベージコレクションは、メモリがひっ迫してくるとどこからも参照されていないインスタンスを探してメモリを解放するという仕様になっている。
今回の実装ではHashMapの中にインスタンスを格納していっているが、たとえもう中のインスタンスを使用することがなくても、HashMapから参照されているために、中身はガベージコレクションの対象とはならない。
今回のHashMapは大した容量にはならないが、長期間動作するプログラムなどでメモリが問題になる場合は適宜手動でHashMapの中のインスタンスを除去する必要がある。

また、BigCharFactoryクラスのgetBigCharメソッドにsynchronized修飾子がついているのは、マルチスレッドなプログラムを意識してのこと。
例えば別のスレッドからgetBigCharメソッドが呼び出されたとき、タイミングが被れば、同じインスタンスのはずなのに重複してインスタンスを生成してしまう。